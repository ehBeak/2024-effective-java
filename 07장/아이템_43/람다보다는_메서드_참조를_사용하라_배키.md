# [item 42] 람다보다는 메서드 참조를 사용하라

## 메서드 참조의 장점
우리는 **함수 객체를 더 간결하게 생성할 수 있다**는 이유로 람다를 사용했다.   
그러나 더 간결하게 메서드 참조를 이용해 더 간결하게 만들 수 있다.

아래 코드를 보자. 람다를 사용한 방식이다.
```java
map.merge(key, 1, (count, incr) -> count + incr);
```

> 동작 방식
> * 만약 map에 주어진 key 값이 없다면
>   * 주어진 key와 값(현재는 1)을 저장한다.
> * 만약 map에 주어진 key 값이 존재한다면
>   * key에 해당하는 값을 3번째 인자인 함수로 계산해서 덮어 씌운다.


위의 람다를 사용한 방식은 간결해 보이지만, **매개변수인 count와 incr은 크게 하는 일이 없이 공간을 차지한다.**

두개의 값을 더하는 로직은 Integer 클래스의 sum이라는 함수를 대신 사용할 수 있다.
아래와 같이 메서드 참조를 이용해보자.
```java
map.merge(key, 1, Integer::sum);
```
이와 같이 메서드 참조를 이용하면 아래와 같은 장점이 있다.
* 간결하다.
* 기능을 잘 드러내는 이름을 지어줄 수 있다.


## 메서드 참조보다 람다를 더 선호하는 상황
대부분 간결하다는 이유로 람다보다 메서드 참조를 선호하지만, 람다를 더 선호하는 상황도 있다.   
아래와 같은 상황이다.
* 매개변수의 이름 자체가 프로그래머에게 좋은 가이드가 될 때
* 람다의 구현부가 너무 길거나 복잡할 때

위와 같은 예시로는 Function.identy()가 있다.   
Function.identity()는 x -> x 꼴의 함수이다.   
완전히 개발자가 코드를 읽는다는 가정 하에 생각한다면 `x->x`가 읽기 쉽다는 걸 알 수 있다.   
([사실 성능에는 차이가 있다고 한다!](https://juno-juno.tistory.com/103))


## 메서드 참조 유형
**정적 참조**   
클래스의 정적 메서드를 참조한다. (Class::staticMethod)   

**인스턴스 메서드 참조**    
클래스의 인스턴스 메서드를 참조한다. (Class::instanceMethod)   
* 한정적 인스턴스 메서드 참조
    * 정적 참조와 비슷하다. 참조 메서드는 생성된 객체에 속해 있다.
* 비한정적 인스턴스 메서드 참조
    * 참조하는 메서드를 호출할 때, 어떤 객체의 메서드를 호출하는지 매개변수로 보낸다.
```java
// 한정적 인스턴스 메서드 참조 예
Instant.now()::isAfter

Instant then = Instant.now(); 
t -> then.isAfter(t); // 람다식으로 표현 : 매개변수로 받은 객체를 그대로 사용한다. (받은 객체의 값을 호출하는 것이 아닌, 그대로 넘긴다.)
```
```java
// 비한정적 인스턴스 메서드 참조 예
String::toLowerCase

str -> str.toLowerCase(); // 람다식으로 표현 : 매개변수로 받은 객체의 함수를 호출한다.
```

**클래스 생성자 참조 메서드**   
인스턴스를 생성할 때, 사용하는 메서드이다. (Class::new)   

**배열 생성자 참조 메서드**   
배열을 생성할 때, 사용하는 메서드이다. (int[]::new)   


## 결론
> 메서드 참조 쪽이 짧고 명확하다면 메서드 참조를 쓰고, 그렇지 않을 때만 람다를 사용하라.
